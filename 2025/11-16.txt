1763251340
bitcrshr!sid727825@user/bitcrshr
alloc first, always! in terms of arg placement i view the alloc like ctx in Go

1763257755
torque!~tachyon@user/torque
yet another debate where the obvious solution is "named arguments"

1763258067
clevor!sid649024@id-649024.hampstead.irccloud.com
I personally go with Allocator, Io, Reader, and Writer, followed other args, maybe in an options struct.

1763268301
grayhatter!~grayhatte@user/grayhatter
"obvious"

1763278850
grayhatter!~grayhatte@user/grayhatter
has anyone used ppoll?

1763279206
grayhatter!~grayhatte@user/grayhatter
SIG.INT is in the mask, but sigint causes direct exit and it's not caught by ppoll

1763283153
karhunkynsi!~user@user/karhunkynsi
Regarding "self". What do you think about having "self" before the function name? Like Go does, https://go.dev/tour/methods/1

1763283343
torque!~tachyon@user/torque
I don't think that's part of zig syntax that is going to change at this point

1763283468
torque!~tachyon@user/torque
I sort of prefer the tighter coupling of zig's methods to their containing type (i.e. a zig method has to be declared in the body of the type for which it is a method)

1763283498
torque!~tachyon@user/torque
go's is a weird mix where you can define methods for a type anywhere, as long as it's the same package

1763283638
torque!~tachyon@user/torque
but I also don't really like how go packages work

1763283720
tranzystorekk!86175ff574@voidlinux/maintainer/tranzystorekk
i kinda like rust's impl blocks, but thats not really an option in zig at this point, either

1763283790
torque!~tachyon@user/torque
I think being able to add methods to an existing type is very interesting capability, but it also makes code harder to read and reason about

1763283814
torque!~tachyon@user/torque
since you completely lose locality of functionality

1763284125
karhunkynsi!~user@user/karhunkynsi
Yeah, i like the methods being in the body of the type. But self as first arg feels a bit off to me currently.. (I'm learning Zig now and worked with Go some years ago.)

1763284363
torque!~tachyon@user/torque
well, I don't know how this works in go because I haven't used it much, but in zig `my_instance.method()` is mostly equivalent to `MyType.method(my_instance)` and you can call it either way

1763284409
torque!~tachyon@user/torque
(the difference is the former will take a reference to `my_instance` automatically if the `self` argument is a pointer)

1763284485
torque!~tachyon@user/torque
methods are not different from normal functions in zig in any way. the compiler just provides some syntactic sugar for calling them

1763284902
karhunkynsi!~user@user/karhunkynsi
Interesting, i haven't learned about using self as a pointer yet.

1763309598
ifreund!2940d10f8b@user/ifreund
there's also nothing special about the name "self"

1763332420
grayhatter!~grayhatte@user/grayhatter
would you accept a diff to add the int width size to the `panic: integer overflow` message?

1763332561
grayhatter!~grayhatte@user/grayhatter
I spent about 1h trying to figure out where the "undefined" data was coming from (bad assumption), but the real problem was `some_slice[0..u5{20} * 2];`, I knew 40 would fit into a usize, but it cant fit into a u5

1763333361
clevor!sid649024@id-649024.hampstead.irccloud.com
I didn't know you could do `u5{20}`.

1763333430
torque!~tachyon@user/torque
I think that was just shorthand to demonstrate the problem

1763333454
torque!~tachyon@user/torque
if the type was comptime known value it would presumably result in a compile error rather than a runtime panic

1763333508
grayhatter!~grayhatte@user/grayhatter
torque is exactly correct, I considered using @as(u5, 20) but I didn't want the suggestion not to us @as (because I'm currently not using it)

1763333535
torque!~tachyon@user/torque
anyway, seems like a reasonable thing to me. the only reason I can imagine not accepting it would be worries about binary bloat from additional panic messages, but that seems frivolous compared to the value of more useful error messages

1763333564
grayhatter!~grayhatte@user/grayhatter
torque: I considered that, and I was thinking only adding it for debug, where even releasesafe would get the shorter message

1763333739
torque!~tachyon@user/torque
hmm, are there currently any differences between debug and releasesafe panic messages? I can see the argument for that but my default would be to have them be the same

