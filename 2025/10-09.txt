1759981634
mountaingoat!~mountaing@user/mountaingoat
is there a way to coerce []Foo to []const Foo (using this with std.meta.eql) in an expression, i.e. without assigning to a const in a separate line?

1759981657
mountaingoat!~mountaing@user/mountaingoat
i tried @as([]const Foo, foos) but it still is showing up as []Foo in the compiler error

1759981662
rvrb!~rvrb@156.146.51.228
are you looking for @constCast()?

1759981698
mountaingoat!~mountaing@user/mountaingoat
actually it is showing up []const Foo with @as, i might have a different problem

1759981714
mountaingoat!~mountaing@user/mountaingoat
rvrb: i thought that was only for dropping const, it can add it too?

1759981800
mountaingoat!~mountaing@user/mountaingoat
docs say remove. i think i have a work around, though

1759981929
rvrb!~rvrb@156.146.51.228
I have SPIR-V target questions; been asking on Discord because I think that's where some of those people are but are there any SPIR-V target people here on IRC?

1759982847
rvrb!~rvrb@156.146.51.228
specifically, getting ACO ERROR: Unimplemented intrinsic instr: @store_deref (%18, %19) (wrmask=xyzw, access=none)

1759982855
rvrb!~rvrb@156.146.51.228
and it feels like a compiler bug more than me doing something wrong

1759982919
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
hello

1759983019
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
in C, to builld modules for different kind of loaders, we can use a struct with function pointers in a header file, and we set these function pointers to the corresponding function we want

1759983135
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
something like struct { void *(*open)(const char *filename); void * (*data_get)(void *mod); void (*close)(void *mod); }

1759983184
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
for a png loader, i set these 3 memebers to functions to manage png file, same for jpeg, webp, etc...

1759983210
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
is there a way to do the same in zig ?

1759983255
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
i know that we can have functions in zig, but i don't know if we can overload them

1759983287
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
note that i'm a beginner in zig, and I'm trying to learn the language

1759983342
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
*we can have functions in structures in zig

1759983503
Affliction!affliction@idlerpg/player/affliction
vtorri: Sure, std.mem.Allocator is an example of that

1759983546
Affliction!affliction@idlerpg/player/affliction
it's pretty much just a series of function pointers with a *anyopaque (basically void*) for additional state

1759983568
Affliction!affliction@idlerpg/player/affliction
the new std.Io is another example

1759983614
Affliction!affliction@idlerpg/player/affliction
Don't be afraid to look at how the std lib does things, it's not nearly as horrific as C++'s :)

1759983620
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
is there doc for that, ori shold just look at the code ?

1759983646
Affliction!affliction@idlerpg/player/affliction
don't think there's standard docs for it, but many people have written about it

1759983666
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
ok, thanks

1759983673
Affliction!affliction@idlerpg/player/affliction
"zig vtables" or "zig dynamic dispatch" might be worthwhile search terms

1759983748
vtorri!~vtorri@2a01:e0a:a4f:12e0:8900:2ab8:284c:3ceb
ok

1759989885
luks!~luks@2a01:c844:254c:8a00:3a89:a0b4:d7c0:c4b6
hey, context switching in the Io.net branch has one bug, that only really shows in release mode where the compiler optimizes things, it's missing rdi in the clobber list https://github.com/ziglang/zig/blob/Io.net/lib/std/Io/EventLoop.zig#L747

1759999772
lxsameer!~lxsameer@Serene/lxsameer
hey folks, I'm trying to cross compile a relatively simple program to windows from linux using `zig c++` but I keep hitting `main_new.cpp:1:1: error: CacheCheckFailed` i cleaned the cache manually as well. any idea how to debug this?

1760002231
mimivals1!~mimivalsi@user/MimiValsi
trying to read bytes comming from a socket, atm I use reader_interface.*.readSliceShort() with a buffer [1024]u8. And don't really understand why it just hangs there forever. If I change the buffer to [400]u8 it reads correctly...

1760002740
Affliction!affliction@idlerpg/player/affliction
lxsameer: Including the global cache? iirc somewhere in %appdata%/local on windows

1760002792
lxsameer!~lxsameer@Serene/lxsameer
Affliction: i'm on linux, I removed the `~/.cache/zig` is there any other ?

1760002813
Affliction!affliction@idlerpg/player/affliction
that'd be it, no other ideas

1760005752
lxsameer!~lxsameer@Serene/lxsameer
how can I at least ask zig for more logs?

1760029068
andrewrk!~andrewrk@mail.ziglang.org
lxsameer: can you share a little more context? (link to copy paste of the output that is erroring)

1760031120
lxsameer!~lxsameer@Serene/lxsameer
andrewrk: unfortunately, it's only a one liner https://dpaste.com/CGCKNCEV2

1760031143
andrewrk!~andrewrk@mail.ziglang.org
does main_new.cpp exist?

1760031150
lxsameer!~lxsameer@Serene/lxsameer
yes

1760031282
andrewrk!~andrewrk@mail.ziglang.org
looks like there's some code using the cache system that is failing to handle the CacheCheckFailed error and print diagnostics for the user

1760031392
andrewrk!~andrewrk@mail.ziglang.org
the way I would debug this would be to edit the compiler to find all the places that Cache.Manifest.hit() is called, and make sure it handles the CacheCheckFailed error by inspecting diagnostics and giving that information to the user, rather than just returning error.CacheCheckFailed from the function

1760031432
andrewrk!~andrewrk@mail.ziglang.org
it's probably the one in Compilation.updateCObject

1760031466
andrewrk!~andrewrk@mail.ziglang.org
instead of try man.hit() it should do more like the logic in the `update` function in that same file

1760031544
andrewrk!~andrewrk@mail.ziglang.org
I think I've basically diagnosed the problem. it's quite contributor friendly. but I don't have a workaround to offer you

1760031848
lxsameer!~lxsameer@Serene/lxsameer
cheers, I'll give it a shot later 

1760032042
andrewrk!~andrewrk@mail.ziglang.org
good luck!

1760035802
rockorager!~rockorage@2600:3c06::f03c:94ff:fea6:1f08
CLI zig stdlib documentation: https://github.com/rockorager/zigdoc

1760035831
rockorager!~rockorage@2600:3c06::f03c:94ff:fea6:1f08
(Intentionally LLM friendly)

1760042972
deevus!~deevus@123.51.31.231
Very cool rockorager

1760043051
rockorager!~rockorage@2600:3c06::f03c:94ff:fea6:1f08
I'm making it even more wild

1760043073
rockorager!~rockorage@2600:3c06::f03c:94ff:fea6:1f08
It's going to run a custom build-runner to get your build graph and all imports so it can do docs for imported modules

