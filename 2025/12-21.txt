1766300670
andrewrk!~andrewrk@mail.ziglang.org
mimivalsi: we all do

1766329841
mimivalsi!~mimivalsi@user/MimiValsi
Was trying the `std.log` interface and got into a weird behavior. I copy-past the example in: https://ziglang.org/documentation/0.15.2/std/#std.log and printed exactly what is meant. But if I call that log function from another file, `warn` log is printed. Then I tried moving the `std_option` variable to the other file and retried and now get the good output. 

1766329892
mimivalsi!~mimivalsi@user/MimiValsi
So I guess that to correctly use the log interface I need to stablish the `std_option` variable in each file with the `log_level` needed and then call `myLofFn`?

1766330004
ifreund!2940d10f8b@user/ifreund
mimivalsi: no, std_options only has an effect if in the root source file

1766330010
ifreund!2940d10f8b@user/ifreund
i.e. main.zig

1766330238
mimivalsi!~mimivalsi@user/MimiValsi
hmm, I see thx

1766344766
LiberatedHandle!~Grey@96.243.31.239
Is this channel active? 

1766345301
ifreund!2940d10f8b@user/ifreund
yep

1766345393
norineko!~norineko@user/norineko
next to my source folder I have a folder of testcase files. I have a unit test in one of my zig files that wants to read a file from the testcases folder. what's the best way to get from whereever unit tests are run to read my file?

1766346165
andrewrk!~andrewrk@mail.ziglang.org
norineko: perhaps to make a test step so you can run `zig build test` then you can add your testcase folder as a module to import

1766357416
LAC-Tech!~lewis@granite-phrase.bnr.la
why do I need a bloody build system PHD to get zig to print out the names of the tests that actually run? "--summary all" just numbers them and prints oiut useless meta data. what does Golang not do this or something?

1766357636
andrewrk!~andrewrk@mail.ziglang.org
if you're asking whether this is inspired by whatever go does, the answer is "no"

1766357668
andrewrk!~andrewrk@mail.ziglang.org
can you explain your use case a little more? are you wanting to consume unit test results programmatically?

1766357771
LAC-Tech!~lewis@granite-phrase.bnr.la
I am wanting to read what tests pass on the console. you know how there's a string after the "test" keyword? I mistakenly thought that might be used to signal things to the programmer rather than being a kind of comment

1766357813
andrewrk!~andrewrk@mail.ziglang.org
the string can be used to filter the subset of tests run

1766357830
LAC-Tech!~lewis@granite-phrase.bnr.la
It really is no fun just guessing which tests have run

1766357853
andrewrk!~andrewrk@mail.ziglang.org
presumably you make sure your unit test fails before you make it succeed, no?

1766357906
LAC-Tech!~lewis@granite-phrase.bnr.la
right, but I don't have a perfect memory, right? or should I keep a little pad and paper next to me when writing zig and transcribe the names of the tests I have already done this for

1766358013
andrewrk!~andrewrk@mail.ziglang.org
I don't understand. why do you want the list of all unit test names? they all succeeded except the ones that failed

1766358127
LAC-Tech!~lewis@granite-phrase.bnr.la
because I have no idea which tests zig is running. just because you have written a test, does not mean zig will run it

1766358144
andrewrk!~andrewrk@mail.ziglang.org
when you add a test, the number goes from X to X + 1

1766358149
LAC-Tech!~lewis@granite-phrase.bnr.la
maybe you forgot to add the refsdecalalltestsref thingee. or who knows.

1766358375
andrewrk!~andrewrk@mail.ziglang.org
anyway I think the point you need to factor, in order to get something productive out of this discussion, is that zig build system is a multiplexer. it can't just dump a bunch of garbage to stderr. it has to be more structured than that

1766358420
andrewrk!~andrewrk@mail.ziglang.org
there are probably plenty of people who want something similar to you. if you drop the sarcasm and make an effort for a concrete solution, you have a good chance to make a difference

1766358603
LAC-Tech!~lewis@granite-phrase.bnr.la
alright, I'll drop the sarcasm. If I put the time in to do that, the chances of it ever happening are what?

1766358659
andrewrk!~andrewrk@mail.ziglang.org
pretty good - part of the purpose of the build system is to provide introspection into what's happening

1766358699
andrewrk!~andrewrk@mail.ziglang.org
just consider that there can be many unit tests in a build graph all running concurrently

1766358791
andrewrk!~andrewrk@mail.ziglang.org
I will however defend the default of `zig build` outputting nothing on success

1766358921
Earnestly!~earnest@user/earnestly
The rule of silence

1766358975
Earnestly!~earnest@user/earnestly
(If you search for this term in relation to programming, more unix more specifically, there will be lots of good grounding for why saying nothing when nothing needs to be said is much better)

1766359218
netvor!~netvor@2a00:ca8:a1f:cd0:4ab:7efb:7d6f:e50
i've felt in past the need for some feedback because i was (and still am) not confident if i did the refAllDecl thing right,  otoh something like an utility that would put count of all accessible tests into my bash prompt would suffice

1766359263
netvor!~netvor@2a00:ca8:a1f:cd0:4ab:7efb:7d6f:e50
(i mean as a separate util, of course)

1766359275
LAC-Tech!~lewis@granite-phrase.bnr.la
I don't care about the default behaviour, I just want an opportunity for it to do the right thing. ANother scenario... I haven't revisited a project for a while, it's nice to see at a glance what sort of tests I have

1766359344
Earnestly!~earnest@user/earnestly
netvor: You "said the quiet part", people want output because they're not confident. To be fair, a lot of tools don't properly engage debug output when problems do arise which contributes to the whole issue

1766359432
LAC-Tech!~lewis@granite-phrase.bnr.la
By this logic microwaves should be silent. Your food is cooked, what need have you of a beep? ditto locking your car doors. 

1766359434
netvor!~netvor@2a00:ca8:a1f:cd0:4ab:7efb:7d6f:e50
not sure where that line of thinking goes.. you could say that people want tests because they are not confident, there's nothing quiet about it

1766359471
Earnestly!~earnest@user/earnestly
LAC-Tech: I wouldn't try to use analogies

1766359508
netvor!~netvor@2a00:ca8:a1f:cd0:4ab:7efb:7d6f:e50
the beep is a sync signal over time .. but yeah maybe let's not get too philosophical

1766359585
Earnestly!~earnest@user/earnestly
For the specific issue, having a --verbose flag print everything is reasonable. ninja is similar in that it would normally keep all progress info on one line until an error occurs. But if you use verbose it prints per-line

1766359599
LAC-Tech!~lewis@granite-phrase.bnr.la
what is "The rule of silence" if not philosophy? also the talk about confidence

1766359609
LAC-Tech!~lewis@granite-phrase.bnr.la
but fine. we can use the premise that not everyone is the same, I suppose

1766359669
Earnestly!~earnest@user/earnestly
netvor: A good example if using commands that expect stdin but don't recieve any. Sometimes it's nice to warn the user after some time delay. mv on large files could also probably say something but I don't have strong opinions here

1766359706
Earnestly!~earnest@user/earnestly
example,*

1766359787
Earnestly!~earnest@user/earnestly
Iow, is a file taking too long to copy enough of a warning state to warrent a message?

1766359795
Earnestly!~earnest@user/earnestly
warrant*

1766360023
netvor!~netvor@2a00:ca8:a1f:cd0:4ab:7efb:7d6f:e50
that's always going to be case by case.  the only universal strategy is silence (unless --verbose was passed).   wrapper scripts, tui's or gui's that do the visualisation were always allowed.

1766360200
netvor!~netvor@2a00:ca8:a1f:cd0:4ab:7efb:7d6f:e50
for zig i mean, maybe having something like git__ps1 but zig__ps1 could be helpful at some point, although i'm not sure if it would be practical since delaying ps1 for any noticeable time would just get annoying af immediately

